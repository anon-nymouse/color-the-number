<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Color The Number</title>
    <style>
        body { margin: 0; font-family: sans-serif; background: #fafafa; overflow: hidden; display: flex; flex-direction: column; align-items: center; }
        #menu { position: absolute; z-index: 100; width: 100%; height: 100%; background: white; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .btn { padding: 12px 20px; margin: 8px; font-size: 16px; background: #222; color: white; border: none; border-radius: 8px; cursor: pointer; min-width: 180px; }
        input, select { padding: 10px; font-size: 16px; border: 2px solid #ddd; border-radius: 8px; margin: 5px; text-align: center; }
        .setting-group { margin: 15px 0; }
        #displayID { font-size: 42px; color: #27ae60; margin: 10px; display: block; letter-spacing: 4px; }
    </style>
</head>
<body>
    <div id="menu">
        <div id="ui-name-setup" style="margin-bottom: 20px;">
          <label>Your Name:</label><br>
          <input type="text" id="playerNameInput" placeholder="Enter Name..." maxlength="12">
        </div>
        <div id="ui-main">
                <h1>Color The Number</h1>
                <button class="btn" onclick="showSettings(false)">Single Player</button><br>
                <button class="btn" style="background:#444" onclick="showMultiplayerUI()">Multiplayer</button>
            </div>

        <div id="ui-multi" style="display:none;">
            <h2>Multiplayer</h2>
            <button class="btn" onclick="showSettings(true)">Create New Room</button>
            <p>— OR —</p>
            <input type="number" id="roomInput" placeholder="Enter Room ID">
            <button class="btn" onclick="joinRoom()">Join Room</button>
            <br><button class="btn" style="background:#999" onclick="location.reload()">Back</button>
        </div>

        <div id="ui-settings" style="display:none;">
            <h2>Game Settings</h2>
            <div class="setting-group">
                <label>Grid Size (Cols x Rows):</label><br>
                <input type="number" id="setCols" value="10" min="2" max="15" style="width:60px"> x
                <input type="number" id="setRows" value="8" min="2" max="15" style="width:60px">
            </div>
            <div class="setting-group">
                <label>Challenge Mode:</label><br>
                <select id="challengeType">
                    <option value="multiples">Multiples (i, j)</option>
                    <option value="primes">Primes Only</option>
                    <option value="mixed">Mixed (Primes & Mult)</option>
                </select>
            </div>
            <div class="setting-group">
                <label>Time (Seconds):</label><br>
                <input type="number" id="setTime" value="60" min="10" style="width:80px">
            </div>
            <button class="btn" style="background:#27ae60" onclick="applySettings()">CONFIRM & START</button>
            <br><button class="btn" style="background:#999" onclick="location.reload()">Cancel</button>
        </div>

        <div id="ui-lobby" style="display:none;">
            <h2>Waiting Room</h2>
            <p>Share this ID with a friend:</p>
            <strong id="displayID">----</strong>
            <button class="btn" style="min-width:100px; font-size:12px; background:#555" onclick="copyID()">Copy ID</button>
            <p id="lobbyStatus" style="margin-top:20px; color:#666">Waiting for opponent to join...</p>
            <button class="btn" style="background:#e74c3c" onclick="location.reload()">Leave</button>
        </div>
    </div>

    <main id="gameContainer"></main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <script src="multiplayer.js"></script>
    <script src="game.js"></script>
</body>
</html>
